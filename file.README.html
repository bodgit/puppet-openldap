<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.8
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-openldap">openldap</h1>

<p>Tested with Travis CI</p>

<p><a href="https://travis-ci.org/bodgit/puppet-openldap"><img
src="https://travis-ci.org/bodgit/puppet-openldap.svg?branch=master"></a>
<a
href="https://coveralls.io/github/bodgit/puppet-openldap?branch=master"><img
src="https://coveralls.io/repos/bodgit/puppet-openldap/badge.svg?branch=master&service=github"></a>
<a href="https://forge.puppetlabs.com/bodgit/openldap"><img
src="http://img.shields.io/puppetforge/v/bodgit/openldap.svg"></a> <a
href="https://gemnasium.com/bodgit/puppet-openldap"><img
src="https://gemnasium.com/bodgit/puppet-openldap.svg"></a></p>

<h4 id="label-Table+of+Contents">Table of Contents</h4>
<ol><li>
<p><a href="#description">Description</a></p>
</li><li>
<p><a href="#setup">Setup - The basics of getting started with openldap</a></p>
<ul><li>
<p><a href="#setup-requirements">Setup requirements</a></p>
</li><li>
<p><a href="#beginning-with-openldap">Beginning with openldap</a></p>
</li></ul>
</li><li>
<p><a href="#usage">Usage - Configuration options and additional
functionality</a></p>
</li><li>
<p><a href="#reference">Reference - An under-the-hood peek at what the module
is doing and how</a></p>
</li><li>
<p><a href="#limitations">Limitations - OS compatibility, etc.</a></p>
</li><li>
<p><a href="#development">Development - Guide for contributing to the
module</a></p>
</li></ol>

<h2 id="label-Description">Description</h2>

<p>This module can install LDAP libraries, client utilities and more
importantly install and configure the <code>slapd</code> ḋaemon to provide
directory services.</p>

<p>RHEL/CentOS, Ubuntu, Debian and OpenBSD are supported using Puppet 4.4.0 or
later.</p>

<h2 id="label-Setup">Setup</h2>

<h3 id="label-Setup+Requirements">Setup Requirements</h3>

<p>You will need pluginsync enabled.</p>

<h3 id="label-Beginning+with+openldap">Beginning with openldap</h3>

<pre class="code ruby"><code class="ruby">include ::openldap</code></pre>

<h2 id="label-Usage">Usage</h2>

<p>Install the LDAP libraries and create a global <code>ldap.conf</code>
mimicking the stock RHEL/CentOS install as well as a per-user
<code>.ldaprc</code> for any subsequently created users. Also install the
client utilities:</p>

<pre class="code ruby"><code class="ruby">class { &#39;::openldap&#39;:
  tls_cacertdir =&gt; &#39;/etc/openldap/certs&#39;
}

::openldap::configuration { &#39;/etc/skel/.ldaprc&#39;:
  ensure =&gt; file,
  owner  =&gt; 0,
  group  =&gt; 0,
  mode   =&gt; &#39;0640&#39;,
  base   =&gt; &#39;dc=example,dc=com&#39;,
  uri    =&gt; [&#39;ldap://ldap.example.com/&#39;],
}

::Openldap::Configuration[&#39;/etc/skel/.ldaprc&#39;] -&gt; User &lt;||&gt;

include ::openldap::client</code></pre>

<p>Create a standalone directory server listening on the standard LDAP TCP
port 389 that disallows anonymous reads and allows users to update their
own object:</p>

<pre class="code ruby"><code class="ruby">include ::openldap
include ::openldap::client

class { &#39;::openldap::server&#39;:
  root_dn       =&gt; &#39;cn=Manager,dc=example,dc=com&#39;,
  root_password =&gt; &#39;{SSHA}7dSAJPGe4YKKEvUPuGJIeSL/03GV2IMY&#39;,
  suffix        =&gt; &#39;dc=example,dc=com&#39;,
  access        =&gt; [
    [
      {
        &#39;attrs&#39; =&gt; [&#39;userPassword&#39;],
      },
      [
        {
          &#39;who&#39;    =&gt; [&#39;self&#39;],
          &#39;access&#39; =&gt; &#39;=xw&#39;,
        },
        {
          &#39;who&#39;    =&gt; [&#39;anonymous&#39;],
          &#39;access&#39; =&gt; &#39;auth&#39;,
        },
      ],
    ],
    [
      {
        &#39;dn&#39; =&gt; &#39;*&#39;,
      },
      [
        {
          &#39;who&#39;    =&gt; [&#39;dn.base=&quot;gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth&quot;&#39;],
          &#39;access&#39; =&gt; &#39;manage&#39;,
        },
        {
          &#39;who&#39;    =&gt; [&#39;self&#39;],
          &#39;access&#39; =&gt; &#39;write&#39;,
        },
        {
          &#39;who&#39;    =&gt; [&#39;users&#39;],
          &#39;access&#39; =&gt; &#39;read&#39;,
        },
      ],
    ],
  ],
  indices       =&gt; [
    [[&#39;objectClass&#39;], [&#39;eq&#39;, &#39;pres&#39;]],
    [[&#39;ou&#39;, &#39;cn&#39;, &#39;mail&#39;, &#39;surname&#39;, &#39;givenname&#39;], [&#39;eq&#39;, &#39;pres&#39;, &#39;sub&#39;]],
  ],
  interfaces    =&gt; [&quot;ldap://${::ipaddress}/&quot;],
}
::openldap::server::schema { &#39;cosine&#39;:
  ensure =&gt; present,
}
::openldap::server::schema { &#39;inetorgperson&#39;:
  ensure =&gt; present,
}
::openldap::server::schema { &#39;nis&#39;:
  ensure  =&gt; present,
  require =&gt; ::Openldap::Server::Schema[&#39;cosine&#39;],
}</code></pre>

<h2 id="label-Reference">Reference</h2>

<p>The reference documentation is generated with <a
href="https://github.com/puppetlabs/puppet-strings">puppet-strings</a> and
the latest version of the documentation is hosted at <a
href="https://bodgit.github.io/puppet-openldap/">bodgit.github.io/puppet-openldap/</a>.</p>

<h2 id="label-Limitations">Limitations</h2>

<p>Rather than expose overlays, modules, databases, etc. as defined or native
types and leave the user to build their own configuration this module takes
the decision to hide most of this complexity and build what most people
probably want out of OpenLDAP; a single database, possibly replicated. This
is largely due to a number of behaviours and idiosyncrasies of OpenLDAP;
the order of overlays matters for example.</p>

<p>Most of the attributes or objects are additive and cannot be deleted
without manually editing the configuration with the server stopped. This
module will always try and issue the necessary LDIF commands however the
server will likely be “unwilling to perform” them. Experimental delete
support is apparently available as a compile-time option which may allow
this module to remove configuration more easily but I have not tested it.</p>

<p>This means that if you try to convert from say a replicating producer back
to a standalone server you will probably get errors from trying to remove
the various replication objects. However things should always build from
scratch cleanly.</p>

<p>This module has been built on and tested against Puppet 4.4.0 and higher.</p>

<p>The module has been tested on:</p>
<ul><li>
<p>RedHat Enterprise Linux 6/7</p>
</li><li>
<p>Ubuntu 14.04/16.04</p>
</li><li>
<p>Debian 7/8</p>
</li><li>
<p>OpenBSD 6.0</p>
</li></ul>

<h2 id="label-Development">Development</h2>

<p>The module has both <a href="http://rspec-puppet.com">rspec-puppet</a> and
<a href="https://github.com/puppetlabs/beaker-rspec">beaker-rspec</a>
tests. Run them with:</p>

<pre class="code ruby"><code class="ruby">$ bundle exec rake test
$ PUPPET_INSTALL_TYPE=agent PUPPET_INSTALL_VERSION=x.y.z bundle exec rake beaker:&lt;nodeset&gt;</code></pre>

<p>Please log issues or pull requests at <a
href="https://github.com/bodgit/puppet-openldap">github</a>.</p>
</div></div>

      <div id="footer">
  Generated on Thu May 11 23:22:32 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.8 (ruby-2.2.5).
</div>

    </div>
  </body>
</html>